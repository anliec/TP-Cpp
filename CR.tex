\documentclass[a4paper, 12pts]{article}

\usepackage[top=3.5cm, bottom=3.5cm, left=3cm, right=3cm]{geometry}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[francais]{babel}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{authblk} %author tools
\usepackage{enumitem}
\usepackage{amssymb}

%\usepackage{hyperref} %pour les liens internet

%\usepackage{graphicx} %pour les images
\title{TP C++ nÂ°3 : Analyse de logs Apache}
\author{Edern HAUMONT}
\author{Nicolas SIX}
\affil{B3111}
\date{\today}

%-----------------------------------------------------------------------------------------


\begin{document}

%\begin{titlepage}

\maketitle

%\end{titlepage}

%----------------------------------------------Title end

\section{Specifications}
\subsection{General specifications}
\paragraph{}
 Our program is designed to deal with apache servers log files. The input of our program (analog) is a correctly built (cf. detailed specs) log file (.log). The output is the list of the ten most visited URL on the server. This list is printed on the standard output. Some options are available to detail the request. The program is able to generate a .dot file which may be viewed with Softwares like Graphviz.
 The program is made to deal quickly with big to be easily updated if the treatment needs of the user evolve.log files. However, it is designed to be easily updated if the treatment needs of the user evolve. That is, if someone wants to modify the application to add a classification level to the Data structure, it must be easy for him/her.
 The program is designed for linux systems. The users should not be a programmer, simply a server administrator.

\subsection{Log lines}
\paragraph{}
 A log line must fulfill several conditions in order to be accepted by the program. Besides the conditions on each information, there is a general structure to check :
 \begin{itemize}[label=$\square$]
 \there is a specific order for the informations in a logline
 \each information in seperated from the others with a space. However, the request, the referrer, and browser informations are given between double quotes.
 \end{itemize}
 Each information of a log line is the object of a small test.
 \begin{itemize}[label=$\square$]
 \item valid ipv4 adress
 \item correct date and hour
 \begin{itemize}
 \item date < current date
 \item hour between 00:00:00 and 23:59:59
 \item GMT between -12 and +12
 \end{itemize}
 \item return code between 100 and 400, codes above 300 included are considered as fail codes
 \item size of transmission >= 0
 \end{itemize}
Here is a log line template given as example :

192.168.0.0 - - [08/Sep/2012:11:16:02 +0200] "GET /temps/4IF16.html HTTP/1.1" 200 12106 "http://intranet-if.insa-lyon.fr/temps/4IF15.html" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1"
 
\subsection{Accepted requests}
\paragraph{}
 ./analog [options] filename.log
 options :
 \begin{itemize}[label=$\square$]
 \item -g outputName.dot
 \item -e
 \item -t hour : hour between 0 and 23
 \end{itemize}
 If there is no option -g, the program will return the 10 most used resources which fill the options
 If there is less than 10 entries, it only prints those which are stored.

\subsection{Data structure}
\paragraph{}
 We wanted a data structure which stores one information for each referrer-destination-hour combination.
 The information stored is the number of hits
 
\newpage
 
\section{Conception}
\subsection{Data storage}
\paragraph{}
 template binaryTree :
    type of the Key
    type of Data
    the tree is balanced
main binary tree ordered by destination. Contains other binary trees ordered by referrer. Contains a static array ordered by hour. Contains a vector of other info.
\subsection{Data computing}
\paragraph{}
 contains the main binaryTree

 manages additions of elements
 computing elements in Binary trees to print 10 most used links
 generating a .dot file with all links between url

\end{document}
